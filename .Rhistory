## EMAIL Issues
eds$Email <- ifelse(eds$Email == "tgaughan@hoinigman.com", "tgaughan@honigman.com", eds$Email)
## COMP ISSUEs
eds$Base <- ifelse(eds$Email == "imartinez@donahue.com", 190000, eds$Base)  # email 3/21
eds$Bonus <- ifelse(eds$Email == "imartinez@donahue.com", 0.06*190000, eds$Bonus)  # email of 3/21
eds$Base <- ifelse(eds$Email == "Ferko@rlf.com", 350000, eds$Base)  # email of 4/31
eds$Bonus <- ifelse(eds$Email == "Ferko@rlf.com", 100000, eds$Bonus)  # email of 4/31
eds$Base <- ifelse(eds$Email == "bhopkins@fieldlaw.com", 180000, eds$Base)
eds$Bonus <- ifelse(eds$Email == "bhopkins@fieldlaw.com", 20000, eds$Bonus)
eds$Base <- ifelse(eds$Email == "pross@clarkhill.com", 600000, eds$Base)
eds$Bonus <- ifelse(eds$Email == "pross@clarkhill.com", 425000, eds$Bonus)
eds$Base <- ifelse(eds$Email == "shinojosa@rappandkrock.com", 135000, eds$Base)
# REVENUE ISSUES
# FY22 Rev $66,746,000; PPEP $892,145;  Effective$657. James Schwartz Schatsis Fries email 5/22   DONE
eds$Revenue <- ifelse(eds$Email == "jschwarz@sflaw.com", 66746000, eds$Revenue)
# PPEP ISSUES
eds$PPEP <- ifelse(eds$Email == "jbaalmann@dmfirm.com", 215000, eds$PPEP) # per email of 4/14
eds$PPEP <- ifelse(eds$Email == "jschwarz@sflaw.com", 892145, eds$PPEP)
eds$PPEP <- ifelse(eds$Email == "TGaughan@honigman.com", 1400000, eds$PPEP)
# EFFECTIVE RATE ISSUES
eds$BillingRate <- ifelse(eds$Email == "jschwarz@sflaw.com", 657, eds$BillingRate)
# Percent of Equity Partner
eds$PPEP <- ifelse(eds$Email == "pstraub@foxrothschild.com", 130, eds$PPEP) # from his 2nd survey submission
# add column to identify source
eds$Source <- "Survey1"
# Coutchie and Olson need to be added from Release 4
Rel4 <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/LFExecDirs/NoviSurvey_Export_Executive_Director_Compensation_Survey_4_PostRel1_5-8-2023.xlsx")
Rel4 <- Rel4[c(55, 57), -c(11, 12, 19, 22:32, 42:47)]
colnames(Rel4)[1:4] <- c("First", "Last", "Email", "Firm")
colnames(Rel4)[5:10] <- c("Title", "TitleOther", "TitleComments", "YrsFirm", "Reports", "ReportsComments")
colnames(Rel4)[11:16] <- c("City", "CityOther", "Lawyers", "EdLevel", "EdOther", "EdComments")
colnames(Rel4)[17:21] <- c("Software", "DomOffices", "PriorPos", "PriorComments", "YearsRole")
colnames(Rel4)[22:25] <- c( "Revenue", "RevComments", "PPEP", "BillingRate")
colnames(Rel4)[26:27] <- c("Base", "Bonus")
Rel4$Software[2] <- "SurePoint"
Rel4$Source <- "ED Comp Survey 4"  # janitor
# library(janitor) # to see which variables match in two dataframes, and by type
# janitor::compare_df_cols(eds, Rel4) #
eds <- bind_rows(eds, Rel4) # 149 on 9/15
# which(eds$Email == "ccoutchie@fosterswift.com")
# which(eds$Email == "kolson@kmclaw.com")
edsTwo <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_CompMetrics_Two_8-26-2023.xlsx") #73 Rel. 2; 88 8/30
# Ron Avenida submitted for both Meyers Nave and Wheeler Trigg
edsTwo <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_CompMetrics_Two_10-20-2023(2).xlsx")
edsTwo <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_CompMetrics_Two_10-20-2023(2).xlsx") #73 Rel. 2; 89 10/20
# Ron Avenida submitted for both Meyers Nave and Wheeler Trigg
colnames(edsTwo)[1:4] <- c("First", "Last", "Email", "Firm")
colnames(edsTwo)[5:10] <- c("Title", "TitleOther", "TitleComments", "EdLevel", "EdOther", "EdComments")
colnames(edsTwo)[11:15] <- c("PriorPos", "PriorComments",  "YearsRole", "City", "CityOther")
colnames(edsTwo)[16:17] <- c("EqPtrs", "OtherLawyers")
colnames(edsTwo)[18:20] <- c("Base", "Bonus", "Reports")
colnames(edsTwo)[21:26] <- c("DomOffices", "Revenue", "PPEP", "PctEP", "PctEPComments", "BillingRate")
colnames(edsTwo)[27:29] <- c("FinSW", "FinSWComment", "OtherSW")
colnames(edsTwo)[30:32] <- c("PGs", "PGsComment", "JDRatio")
# Straub Fox is duplicate; Ron Avenida Meyers Nave is duplicate; Barry Pennell of Cranfill is duplicate; Jeremy Gresham is double (he did first version); domicka max is double (did first version); Amon of Greenbaum is dupe; Lightell is dupe (third time he has taken it!)
# Bodman's person is COO (Randy Becker, last year has gone per email)
dupesTwo <- c(which(edsTwo$Email == "kellikohout@dwt.com")[1])  # 19, 63
edsTwo <- edsTwo[-c(dupesTwo),  ]
# which(duplicated(edsTwo$Email))
## TITLE ISSUES
edsTwo$Title <- str_trim(edsTwo$Title, side = "both")
# edsTwo$Title <- ifelse(edsTwo$Email == "mkatz@reinhartlaw.com", "Director", edsTwo$Title)
edsTwo$Title <- factor(edsTwo$Title)
# levels(edsTwo$Title)
## COMP ISSUEs
edsTwo$Base <- ifelse(edsTwo$Email == "imartinez@donahue.com", 190000, edsTwo$Base)  # email 3/21
edsTwo$Bonus <- ifelse(edsTwo$Email == "imartinez@donahue.com", 0.06*190000, edsTwo$Bonus)  # email of 3/21
# NI 2022, $4.5MM; PPEP, $321K; Effective $230; SurePoint (unhappily) == John Gosnell of Sulloway; in 6/29
# REVENUE ISSUES
edsTwo$Revenue <- ifelse(edsTwo$Email == "jschwarz@sflaw.com", 66746000, edsTwo$Revenue)
edsTwo$Revenue <- ifelse(edsTwo$Email == "jgosnell@sulloway.com", 4500000, edsTwo$Revenue)
# PPEP ISSUES
edsTwo$PPEP <- ifelse(edsTwo$Email == "jgosnell@sulloway.com", 321000, edsTwo$PPEP)
# EFFECTIVE RATE ISSUES
# "SurePoint and effective billing rate is $304."  Greg Morrow of Winnick greg.morrow@brownwinick.com in 7/11
edsTwo$BillingRate <- ifelse(edsTwo$Email == "jschwarz@sflaw.com", 657, edsTwo$BillingRate)
edsTwo$BillingRate <- ifelse(edsTwo$Email == "jgosnell@sulloway.com", 230, edsTwo$BillingRate)
edsTwo$BillingRate <- ifelse(edsTwo$Email == "greg.morrow@brownwinick.com", 304, edsTwo$BillingRate)
# add column to identify source
edsTwo$Source <- "SurveyTwo"  # 87 on 9/15
edsThree <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_CompMetrics_Three_10-20-2023(1).xlsx") # 37 9/15
edsThree <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_CompMetrics_Three_10-20-2023(1).xlsx") # 38 10/20
colnames(edsThree)[1:4] <- c("First", "Last", "Email", "Firm")
colnames(edsThree)[5:10] <- c("Title", "TitleOther", "TitleComments", "EdLevel", "EdOther", "EdComments")
colnames(edsThree)[11:15] <- c("PriorPos", "PriorComments",  "YearsRole", "City", "CityOther")
colnames(edsThree)[16:17] <- c("EqPtrs", "OtherLawyers")
colnames(edsThree)[18:20] <- c("Base", "Bonus", "Reports")
colnames(edsThree)[21:24] <- c("DomOffices", "Revenue", "PPEP",  "BillingRate")
colnames(edsThree)[25:27] <- c("PGs", "PGsComment", "JDRatio")
colnames(edsThree)[28:29] <- c("WklyEmails", "WklyEmailsComment")
colnames(edsThree)[30:32] <- c("FinSW", "FinSWComment", "OtherSW")
# Chrissie Young Goosman did first survey partially, and 3rd completely.  Removed her from eds
# Phil Chacko 9/7: Base $180K + $40K Bonus Rev = $27.5M; Effective Rate = $808; Bill4Time & Quickbooks
edsThree$Base <- ifelse(edsThree$Email == "philchacko3@gmail.com", 180000, edsThree$Base)
edsThree$Bonus <- ifelse(edsThree$Email == "philchacko3@gmail.com", 40000, edsThree$Bonus)
edsThree$Revenue <- ifelse(edsThree$Email == "philchacko3@gmail.com", 27500000, edsThree$Revenue)
edsThree$BillingRate <- ifelse(edsThree$BillingRate == "philchacko3@gmail.com", 808, edsThree$BillingRate)
edsThree$FinSW <- ifelse(edsThree$Email == "philchacko3@gmail.com", "Bill4Time, Quickbooks", edsThree$FinSW)
edsThree$Base <- ifelse(edsThree$Email == "dpatrylak@nicolaidesllp.com", 326000, edsThree$Base)
edsThree$Bonus <- ifelse(edsThree$Email == "dpatrylak@nicolaidesllp.com", 15000, edsThree$Bonus)
edsThree$Revenue <- ifelse(edsThree$Email == "dpatrylak@nicolaidesllp.com", 35000000, edsThree$Revenue)
edsThree$BillingRate <- ifelse(edsThree$BillingRate == "dpatrylak@nicolaidesllp.com", 300, edsThree$BillingRate)
edsThree$FinSW <- ifelse(edsThree$Email == "dpatrylak@nicolaidesllp.com", "Rippe & KingstonLMS", edsThree$FinSW)
# which(edsThree$Email == "dpatrylak@nicolaidesllp.com") #24, 35 She did partial and then emailed data
edsThree <- edsThree[-24, ]
edsThree$Source <- "SurveyThree"   # 36 on 9/15
edsFour <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_Comp_and_Metrics_10-10-2023.xlsx")
edsFour <- read_xlsx("C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/NoviSurvey_Export_Principal_Administrator_Comp_and_Metrics_10-20-2023.xlsx") # 38 10/20
View(edsFour)
names(edsFour)
colnames(edsFour)[1:4] <- c("First", "Last", "Email", "Firm")
colnames(edsFour)[5:10] <- c("Title", "TitleOther", "TitleComments", "EdLevel", "EdOther", "EdComments")
colnames(edsFour)[11:15] <- c("PriorPos", "PriorComments",  "YearsRole", "City", "CityOther")
colnames(edsFour)[16:17] <- c("EqPtrs", "OtherLawyers")
colnames(edsFour)[18:20] <- c("Base", "Bonus", "Reports")
colnames(edsFour)[21:23] <- c("DomOffices", "Revenue", "JDRatio")
colnames(edsFour)[24:26] <- c("BillingRate", "PGs", "PGsComment")
colnames(edsFour)[27:29] <- c("FinSW", "FinSWComment", "OtherSW")
View(edsFour)
combo <- bind_rows(eds, edsTwo, edsThree, edsFour)
# add in the data from the second and third versions
combo <- bind_rows(eds, edsTwo, edsThree, edsFour)  # 261 obs of 53 vars on 9/15
# remove dupes and ineligible: COO Analytic Extra.Rmd "compare d2c Source = A2223 or A23 to current downloads"
# da@tblaw.com is dandersen1972@gmail.com (Tiffany Bosco)
# Remove the row with Email = "XX" and Source = "Survey 1" by index
doubles <- c(which(combo$Last == "Amon" & combo$Source == "Survey1"),
which(combo$Email == "avenida@wtotrial.com" & combo$Source == "SurveyTwo"),  # 194
which(combo$Email == "kcannon@bassberry.com" & combo$Source == "Survey1"),   # 110
which(combo$Email == "jgresham@lplegal.com" & combo$Source == "SurveyTwo"),
which(combo$Email == "rlightell@gallowaylawfirm.com" & combo$Source == "SurveyTwo"),
which(combo$Email == "hmudrick@winstead.com" & combo$Source == "Survey1"),
which(combo$Email == "fomalley@carltonfields.com" & combo$Source == "Survey1"),
which(combo$Email == "bpennell@cshlaw.com" & combo$Source == "Survey1"),
which(combo$Email == "mschadler@chuhak.com" & combo$Source == "Survey1"),
which(combo$Email == "pstraub@foxrothschild.com" & combo$Source == "SurveyThree"),
which(combo$Email == "pstraub@foxrothschild.com" & combo$Source == "SurveyTwo"),
which(combo$Email == "sil.talarico@gmail.com"))
combo <- combo[-c(doubles),  ]
dupes <- c(which(combo$Email == "mcsantos@ctpadv.com.br"),
which(combo$Email == "jjimson@legal.com"),
which(combo$Email == "balbert@albmac.com"),  # 113 he is MP, Russ Neault ED to take part
which(combo$Email == "blandry@mirickoconnell.com"),  # 1, but Diane Power later submitted
which(combo$Email == "dbluedorn@bccz.com"), # 120, got dyates to take part, is that true?
which(combo$Email == "ehayes@schwabe.com"), # 164 got Alishia Young to take part
which(combo$Email == "kginter@amundsendavislaw.com"), # 130, got Stephen Stitle to take it
which(combo$Email == "maryt@mckinleyirvin.com"),  # 41 got Tod Gilbertson to take it
which(combo$Email == "reta.alphin@berrylawfirm.com"),
which(combo$Email == "caskeyb@goosmannlaw.com"),
which(combo$Email == "thoover@wolfsedgeintegrators.com"))
combo <- combo[-c(dupes),  ]  #227 on 9/15
combo <- combo[-227, ]  # it is blank
# does combo match d2c?  Code is in COO Analytic Extra.Rmd search for "does combo match d2c?"
combo$Email <- ifelse(combo$Email == "dsantana@fitcheven.om", "dsantana@fitcheven.com", combo$Email)
# TITLE fix and recode
combo$Title <- dplyr::case_match(combo$Title, 'Chief Administrative Officer' ~ 'Chief',
'Chief Administration Officer' ~ "Chief",
'Chief Executive Officer' ~ "Chief",
'Chief Financial Officer' ~ "Chief",
'Chief of Staff' ~ 'Chief',
'Chief Operating Executive' ~ 'Chief',
'Chief Operating Officer' ~ 'Chief',
'Director' ~ 'Director',
'Director of Administration' ~ 'Director',
'Director of Operations' ~ 'Director',
'Executive Director' ~ 'Director',
'Managing Director' ~ 'Director',
'Firm Administrator' ~ 'Administrator',
'Executive Administrator' ~ 'Administrator',   # Beard St. Claire person
'Legal Administrator' ~ 'Administrator',
'Office Administrator' ~ 'Administrator',
'Office Manager' ~ 'Administrator',
'Other' ~ 'Other')
combo$Title <- ifelse(combo$Email == "chansson@hopkinscarley.com", "Director", combo$Title)
combo$Title <- ifelse(combo$Email == "jennifer@beardstclair.com", "Administrator", combo$Title)
combo$Title <- ifelse(combo$Email == "rlightell@gallowaylawfirm.com", "Chief", combo$Title)
combo$Title <- ifelse(combo$Email == "alan.goldman@bfkn.com", "Chief", combo$Title) # CFO with COO also
combo$Title <- ifelse(combo$Email == "anthony.canzoneri@hwhlaw.com", "Other", combo$Title) # CFO
combo$Title <- factor(combo$Title, levels = c("Chief", "Director", "Administrator", "Manager", "Other"))
# table(combo$Title, useNA = "always")
# which(is.na(combo$Title))   # 32, 76, 89
# EdLevel Issues
# put most specific responses first; a blog post! what a mess! show all fixes in alpha order
combo$EdLevel <- str_trim(combo$EdLevel, side = "both")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Associate's", "No college degree")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "College degree,JD", "JD")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "College degree,MBA,JD", "MBA") #note this
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "College degree,MBA,PhD", "MBA")  # note this
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Four-year college degree", "College degree")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Four-year college degree,Other", "College degree")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "High school graduate", "No college degree")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Masters \\(other than MBA\\),MBA", "MBA")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Masters \\(other than MBA\\),Other", "Masters")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Masters \\(other than MBA\\),MBA,Other", "Masters")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Masters \\(other than MBA\\)", "Masters")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "MBA,Other", "MBA")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "MBA,JD", "MBA")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Other", "College degree") # three CPAs below
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Some college, no degree", "No college degree")
combo$EdLevel <- str_replace_all(combo$EdLevel, pattern = "Some college, no degree,Other", "No college degree")
combo$EdLevel <- ifelse(combo$Email == "james.perkins@procopio.com", "MBA", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "kborofsky@lalaw.com", "MBA", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "frank.lamanna@thompsonhine.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "tmoorenatal@hpdlaw.com", "No college degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "bgilman@smithdebnamlaw.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "marie.fiorito@sfbbg.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "tkmiecik@kdlegal.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "kmbrostron@lashlybaer.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "skloot@cwilson.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "nhamlett@truckerhuss.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "lquindt@ftblaw.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "jbuchtel@frgalaw.com", "College degree", combo$EdLevel)
combo$EdLevel <- ifelse(combo$Email == "cborza@bodmanlaw.com", "No college degree", combo$EdLevel) # 0 on LI
combo$EdLevel <- ifelse(combo$Email == "jhamilton@wolfsedgeintegrators.com", "College degree", combo$EdLevel) # "CPA
combo$EdLevel <- factor(combo$EdLevel, levels = c("JD","MBA","Masters","College degree","No college degree"))
# table(combo$EdLevel, useNA = "always")
# which(is.na(combo$EdLevel))
# jbuchtel@frgalaw.com [9] is retired, but College; marie.fiorito@sfbbg.com [99] linkedIn says "Harper College but gives no date of graduation"; cborza@bodmanlaw.com [140] can't find on site or LinkedIn; arti.shah@weil.com [186] filled it out but he is comp guy'  ksmith@bairdholm.com (CPA); svandorp@mullinslawyers.com.au (australia, CPA); eamon CPA ("all states require CPAs to have a bachelors")
# which(combo$EdLevel == "Other")
## DOMESTIC Offices DomOff
combo$DomOffices <- ifelse(combo$Email == "jtrela@rosenbergmartin.com", 4, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "joe.kelley@wilsonelser.com", 42, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "tmoorenatal@hpdlaw.com", 2, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "tschwartz@robinskaplan.com", 8, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "gibbk@whiteandwilliams.com", 11, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "klaughman@timoneyknox.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "maryt@mckinleyirvin.com", 9, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "hmudrick@winstead.com", 8, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "gorman@khlaw.com", 4, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "kristy.williams@mhllp.com", 4, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "tbseverson@nyemaster.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "kcannon@bassberry.com", 4, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "jessica.hoffmann@steptoe-johnson.com", 10, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "aeverage@meyersnave.com", 5, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "mschadler@chuhak.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "bpennell@cshlaw.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "mslonner@cbdm.com", 2, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "tina.shinnick@hbsr.com", 2, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "kborofsky@lalaw.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "cgillis@pcrfirm.com", 2, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "mmaynard@ottenjohnson.com", 2, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "shawn.adams@stinson.com", 17, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "vlachapelle@eatonpeabody.com", 5, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "fomalley@carltonfields.com", 12, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "ksmith@bairdholm.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "imartinez@donahue.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "pwinter@fgppr.com", 11, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "darcy.diaz@ropers.com", 11, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "scook@klendalaw.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "dsantana@fitcheven.com", 5, combo$DomOffices) # email is wrong
combo$DomOffices <- ifelse(combo$Email == "dcervantes@hsplegal.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "hkatz@bracheichler.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "bdonohue@bsk.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "laurel.henschel@skadden.com", 21, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "acampbell@bbllaw.com", 2, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "kellikohout@dwt.com", 11, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "dsochia@mckoolsmith.com", 8, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "hduncan@mcginnislaw.com", 5, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "gbrown@wglaw.com", 12, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "sbrill@be-law.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "bsingleton@connellfoley.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "arthur.bernstein@tuckerellis.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "jgresham@lplegal.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "jgosnell@sulloway.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "ayoung@schwabe.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "sil.talarico@gmail.com", 1, combo$DomOffices) # Sunstein
combo$DomOffices <- ifelse(combo$Email == "bthompson@gsw-llp.com", 1, combo$DomOffices)  # Gadsden
combo$DomOffices <- ifelse(combo$Email == "megan@cookcraig.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "avenida@wtotrial.com", 3, combo$DomOffices)  #Wheeler
combo$DomOffices <- ifelse(combo$Email == "jdemarest@plavekoch.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "khurley@connkavanaugh.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "dean.nakayama@moyewhite.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "jeumont@degan.com", 3, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "cmccallum@arnettlawgroup.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "bseabolt@scott-scott.com", 12, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "rmanning@mchlawpc.com", 1, combo$DomOffices)
combo$DomOffices <- ifelse(combo$Email == "dpatrylak@nicolaidesllp.com", 6, combo$DomOffices)
# which(is.na(combo$DomOffices))
# summary(combo$DomOffices)
# which(is.na(combo$DomOffices))
# PRIOR Position Issues
# table(combo$PriorPos, useNA = "always")
combo$PriorPos <- str_replace(combo$PriorPos, pattern = "Hired from a different position at another law firm", replacement = "Hired from a different role at another law firm")
## YEARS IN ROLE at all law firms ISSUES
# summary(combo$YearsRole)
# CITY ISSUES
# jessica.hoffmann@steptoe-johnson.com == DALLAS?
combo$CityOther <- str_remove_all(string = combo$CityOther, pattern = ",.+$")
combo$City <- ifelse(is.na(combo$City), combo$CityOther, combo$City)
combo$City <- ifelse(combo$Email == "moleary@hinckleyallen.com", "Boston", combo$City)
combo$City <- ifelse(combo$Email == "dbluedorn@bccz.com", "Pittsburgh", combo$City)
combo$City <- ifelse(combo$Email == "sferber@smgglaw.com", "Pittsburgh", combo$City)
combo$City <- ifelse(combo$Email == "vlachapelle@eatonpeabody.com", "Portland", combo$City)
combo$City <- ifelse(combo$Email == "ldunnagan@glennrob.com", "Roanoke", combo$City)
combo$City <- ifelse(combo$Email == "eseeger@huntermaclean.com", "Savannah", combo$City)
combo$City <- ifelse(combo$Email == "kolson@kmclaw.com", "Salt Lake City", combo$City)
combo$City <- ifelse(combo$Email == "bdonohue@bsk.com", "Syracuse", combo$City)
combo$City <- ifelse(combo$Email == "abarchick@rcolaw.com", "Toledo", combo$City)
combo$City <- ifelse(combo$Email == "jgosnell@sulloway.com", "Boston", combo$City)
combo$City <- ifelse(combo$Email == "vallen@gorencherof.com", "Miami", combo$City)
# CityLocations == DomOffices
# combo$City <- ifelse(combo$CityOther == "Stamford, CT", "Stamford",
#                      ifelse(combo$CityOther == "Buffalo", "Buffalo",
#                             ifelse(combo$CityOther == "Wilmington, Delaware", "Wilmington",
#                                    ifelse(combo$CityOther == "Des Moines, IA", "Des Moines",
#                                           ifelse(combo$CityOther == "Burlington", "Burlington",
#                                                  ifelse(combo$CityOther == "Salt Lake City, UT", "Salt Lake City",
#                                                         ifelse(combo$CityOther == "St. Louis", "St. Louis", combo$City)))))))
combo$City <- ifelse(combo$City == "Albany NY", "Albany", combo$City)
combo$City <- ifelse(combo$City == "Buffalo ny", "Buffalo", combo$City)
combo$City <- ifelse(combo$City == "COLUMBIA SC", "Columbia", combo$City)
combo$City <- ifelse(combo$City == "Des Moines Iowa", "Des Moines", combo$City)  # how do I handle Charleston WV and SC? Portland ME and OR
combo$City <- ifelse(combo$City == "Iselin NJ", "Iselin", combo$City)
combo$City <- ifelse(combo$City == "Kansas city", "Kansas City", combo$City)
combo$City <- ifelse(combo$City == "New York City", "New York", combo$City)
combo$City <- ifelse(combo$City == "Northern Virginia", "Washington", combo$City)
combo$City <- ifelse(combo$City == "Relatively Low COLA", "Lansing", combo$City)
combo$City <- ifelse(combo$City == "Washington, DC", "Washington", combo$City)
combo$City <- ifelse(combo$City == "Wilmington Delaware", "Wilmington", combo$City)
combo$City <- str_replace_all(combo$City, pattern = "Albany", replacement = "Albany NY")
combo$City <- str_replace_all(combo$City, pattern = "Burlington", replacement = "Burlington VT")
combo$City <- str_replace_all(combo$City, pattern = "Columbia", replacement = "Columbia SC")
combo$City <- str_replace_all(combo$City, pattern = "Jackson", replacement = "Jackson MS")
combo$City <- str_replace_all(combo$City, pattern = "Kansas city", replacement = "Kansas City")
combo$City <- str_replace_all(combo$City, pattern = "Iselin", replacement = "Newark")
combo$City <- str_replace_all(combo$City, pattern = "Roseland", replacement = "Newark")
combo$City <- str_replace_all(combo$City, pattern = "New York City", replacement = "New York")
combo$City <- str_replace_all(combo$City, pattern = "Roanoke VA", replacement = "Roanoke")
combo$City <- factor(combo$City)
# levels(combo$City)  # 5/23 have 73
cityCount <- combo %>% group_by(City) %>% summarise(Count = n()) %>% arrange(desc(Count))  # 6 w/ 6+ 6/29
# which(is.na(combo$City))
# REPORTs ISSUEs
# summary(combo$Reports)
# which(combo$Reports == 1300)  # max is Weil Gotshal
# Equity Partners EqPtrs
# summary(combo$EqPtrs)
# COMP ISSUES
# which(combo$Base == min(combo$Base, na.rm = TRUE))
# which(combo$Total == max(combo$Total, na.rm = TRUE))  Holsworth of Locke Lorde
# email 8/3 jlovato@gblaw.com  As of 01.01.23, my base is $143,000 and my 2022 total bonus was $19,750.
# email 8/3 Avenida@wtotrial.com 2022 Bonus - $65,000  2023 Base - $350,000  2023 Bonus – n/a
# Michelle Doran 9/18 mdoran@murthalaw.comI’m at $335k and 35k bonus.  revenue last year was 39M.  Rippe for our financial management software.  We also are a LexMundi firm.
combo$Base <- ifelse(combo$Email == "mdoran@murthalaw.com", 335000, combo$Base)
combo$Bonus <- ifelse(combo$Email == "mdoran@murthalaw.com", 35000, combo$Bonus)
combo$Base <- ifelse(combo$Email == "shinojosa@rappandkrock.com", 135000, combo$Base)
combo$Base <- ifelse(combo$Email == "cborza@bodmanlaw.com", 163000, combo$Base)   # was 16,300
combo$Base <- ifelse(combo$Email == "jlovato@gblaw.com", 143000, combo$Base)
combo$Bonus <- ifelse(combo$Email == "jlovato@gblaw.com", 19750, combo$Bonus)
combo$Base <- ifelse(combo$Email == "Avenida@wtotrial.com", 350000, combo$Base)
combo$Bonus <- ifelse(combo$Email == "Avenida@wtotrial.com", 65000, combo$Bonus)
# Salary = $530,000 ; Bonus  = $142,000 KCannon@bassberry.com email of 8/15
combo$Base <- ifelse(combo$Email == "KCannon@bassberry.com", 530000, combo$Base)
combo$Bonus <- ifelse(combo$Email == "KCannon@bassberry.com", 142000, combo$Bonus)
combo$Base <- ifelse(combo$Email == "llunsfors@wolfsedgeintegrators.com", 300000, combo$Base) # wrote 300
combo$Base <- ifelse(combo$Email == "jhamilton@wolfsedgeintegrators.com", 350000, combo$Base) # wrote 350
combo$Base <- ifelse(combo$Email == "cmartin@collinsandlacy.com", 225000, combo$Base) # wrote 225
combo$Base <- ifelse(combo$Email == "dmiller@sutter-law.com", 225000, combo$Base) # wrote 225
combo$Base <- ifelse(combo$Email == "cpierce@parksandsolar.com", 650000, combo$Base) # wrote 650
combo$Base <- ifelse(combo$Email == "rrhodehamel@awattorneys.com", 260000, combo$Base) # wrote 260
combo$Base <- ifelse(combo$Email == "lquindt@ftblaw.com", 375000, combo$Base) # wrote 375
combo$Base <- ifelse(combo$Email == "cdecker@epsten.com", 375000, combo$Base) # wrote 375
combo$Base <- ifelse(combo$Email == "youngc@goosmannlaw.com", 350000, combo$Base) # wrote 350
combo$Base <- ifelse(combo$Email == "stalarico@sunsteinlaw.com", 435000, combo$Base) # wrote 435
combo$Base <- ifelse(combo$Email == "stalarico@sunsteinlaw.com", 435000, combo$Base) # wrote 435
combo$Base <- ifelse(combo$Email == "pmorton@burnslev.com", 490000, combo$Base) # wrote 490
combo$Base <- ifelse(combo$Email == "cmontemor@apslaw.com", 350000, combo$Base) # wrote 435
combo$Base <- ifelse(combo$Email == "philchacko3@gmail.com", 900000, combo$Base) # wrote 435
combo$Base <- ifelse(combo$Email == "mkodner@maglaw.com", 800000, combo$Base) # wrote 800
combo$Base <- ifelse(combo$Email == "nhamlett@truckerhuss.com", 520000, combo$Base) # wrote 520
combo$Base <- ifelse(combo$Email == "jriggleman@capdale.com", 600000, combo$Base) # wrote 600
combo$Bonus <- ifelse(combo$Email == "jdurham@verrill-law.com", 50000, combo$Bonus) # wrote 50
combo$Bonus <- ifelse(combo$Email == "dean.nakayama@moyewhite.com", 0, combo$Bonus) # did not total
combo$Total <- combo$Base + combo$Bonus
combo$Total <- ifelse(combo$Email == "jessica.hoffmann@steptoe-johnson.com", 496375, combo$Total) # 2022 + 4.5%
combo$Total <- ifelse(combo$Email == "kristy.williams@mhllp.com", 418000, combo$Total) # 2022 + 4.5%
# summary(combo$Total)
COLA <- readxl::read_xlsx(path = "C:/Users/rees/Documents/R/Projects/Clients/LFExecDirs/US Law Firms/Cost of Living advisorsmith COLA.xlsx")
combo <- left_join(combo, COLA[  , c("COLA", "City")])
combo$TotalCOLA <- (combo$Total/combo$COLA)*100  # adjust total comp by COLA of major city
combo$Lawyers <- combo$EqPtrs + combo$OtherLawyers
# which(is.na(combo$Lawyers))  which(min(combo$Lawyers))
combo$Lawyers <- ifelse(combo$Email == "ccoutchie@fosterswift.com", 87, combo$Lawyers) # NA
combo$Lawyers <- ifelse(combo$Email == "kolson@kmclaw.com", 149, combo$Lawyers) # NA
combo$Lawyers <- ifelse(combo$Email == "walshc@deflaw.com", 121, combo$Lawyers) # showed 1
# summary(combo$Lawyers)
# which(combo$Email == "walshc@deflaw.com")
## REVENUE ISSUES  Maybe confirm these! or redo with email
combo$Revenue <- ifelse(combo$Revenue == 13600, 13600000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 28000, 28000000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 13500, 13500000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 4469374, 44693740, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 6748000000, 674800000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 100000000, 10000000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 3448276, 344827, combo$Revenue)
combo$Revenue <- ifelse(combo$Email == "mdoran@murthalaw.com", 39000000, combo$Revenue)
# summary(combo$Revenue)
## PPEP Issues
combo$PPEP <- ifelse(combo$Email == "tgaughan@honigman.com", 1400000, combo$PPEP)
combo$PPEP <- ifelse(combo$Email == "pcampbell@turnerpadget.com", median(combo$PPEP, na.rm = TRUE), combo$PPEP)
combo$PPEP <- ifelse(combo$Email == "dmiller@sutter-law.com", median(combo$PPEP, na.rm = TRUE), combo$PPEP)
combo$PPEP <- ifelse(combo$Email == "pross@clarkhill.com", 620000, combo$PPEP)   # as entered 620, I did not confirm
combo$PPEP <- ifelse(combo$Email == "rundell@hitefanning.com", 330000, combo$PPEP) # as entered 33000, I did not confirm
combo$PPEP <- ifelse(combo$Email == "jeff@lsclaw.com", 500000, combo$PPEP)  # as entered 50000, I did not confirm
combo$PPEP <- ifelse(combo$Email == "akoplos@shuffieldlowman.com", 750000, combo$PPEP)   # as entered 75000, I did not confirm
combo$PPEP <- ifelse(combo$Email == "sking@pbwt.com", 2025000, combo$PPEP) # as entered 20250000, did not confirm
# summary(combo$PPEP)
# which(combo$PPEP < 250000)  # 3 but I left them as is
# max(combo$PPEP, na.rm = TRUE)
# Billing Rate Issues
# summary(combo$BillingRate)
# which(combo$BillingRate == 1250)  # 3
# Practice Groups
# table(combo$PGs)
# Lawyer Staff Ratio
# I converted the following numbers to percentages (41 was lowest)
combo$JDRatio <- ifelse(combo$Email == "rcarroll@robinsongray.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "jdurham@verrill-law.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "kevin.busch@lawmoss.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "ganderson@andersonkill.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "dcovello@rccblaw.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "eamon@greenbaumlaw.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "rstaggers@bakerdonelson.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "kcannon@bassberry.com", combo$JDRatio/1000, combo$JDRatio) #636
combo$JDRatio <- ifelse(combo$Email == "jbrefach@mccarter.com", 0.51, combo$JDRatio) # was 51
combo$JDRatio <- ifelse(combo$Email == "acampbell@bbllaw.com", 0.63, combo$JDRatio)
# summary(combo$JDRatio)
# Weekly Emails
# summary(combo$WklyEmails)
# ADD GENDER
library(gender)
library(genderdata)
# remotes::install_github("lmullen/genderdata")
Gender <- gender(names = combo$First, method = "genderize")
combo <- bind_cols(combo, Gender[2])  #on 7/2 blocked from too many requests. so save and read
# table(factor(combo$gender), useNA = "always")
# which(is.na(combo$gender)
combo$gender <- ifelse(combo$Email == "brefach@mccarter.com", "male", combo$gender)
# writexl::write_xlsx(combo, path = "C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/comboReportFour.xlsx")  # 228 on 9/28 after removing all duplicates and unqualified
writexl::write_xlsx(combo, path = "C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/comboReportFour.xlsx")
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::serve_site()
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::check_site()
blogdown:::create_index()
blogdown::check_site()
blogdown::config_Rprofile()
blogdown::config_Rprofile()
blogdown::clean_duplicates(preview = FALSE)
file.remove(c(
"content/post/2023-01-18-create-drop-down-selection-lists/DropDowns.html"
))
blogdown::build_site(build_rmd = "newfile")
blogdown::check_site()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::serve_site()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(knitr)
figPath <- "C:/Users/Rees Morrison/Documents/R/Projects/CLIENTS/Themes/BlogThemes1/static/media/"
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
