combo$Total <- combo$Base + combo$Bonus
combo$Total <- ifelse(combo$Email == "jessica.hoffmann@steptoe-johnson.com", 496375, combo$Total) # 2022 + 4.5%
combo$Total <- ifelse(combo$Email == "kristy.williams@mhllp.com", 418000, combo$Total) # 2022 + 4.5%
# summary(combo$Total)
COLA <- readxl::read_xlsx(path = "C:/Users/rees/Documents/R/Projects/Clients/LFExecDirs/US Law Firms/Cost of Living advisorsmith COLA.xlsx")
combo <- left_join(combo, COLA[  , c("COLA", "City")])
combo$TotalCOLA <- (combo$Total/combo$COLA)*100  # adjust total comp by COLA of major city
combo$Lawyers <- combo$EqPtrs + combo$OtherLawyers
# which(is.na(combo$Lawyers))  which(min(combo$Lawyers))
combo$Lawyers <- ifelse(combo$Email == "ccoutchie@fosterswift.com", 87, combo$Lawyers) # NA
combo$Lawyers <- ifelse(combo$Email == "kolson@kmclaw.com", 149, combo$Lawyers) # NA
combo$Lawyers <- ifelse(combo$Email == "walshc@deflaw.com", 121, combo$Lawyers) # showed 1
# summary(combo$Lawyers)
# which(combo$Email == "walshc@deflaw.com")
## REVENUE ISSUES  Maybe confirm these! or redo with email
combo$Revenue <- ifelse(combo$Revenue == 13600, 13600000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 28000, 28000000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 13500, 13500000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 4469374, 44693740, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 6748000000, 674800000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 100000000, 10000000, combo$Revenue)
combo$Revenue <- ifelse(combo$Revenue == 3448276, 344827, combo$Revenue)
combo$Revenue <- ifelse(combo$Email == "mdoran@murthalaw.com", 39000000, combo$Revenue)
# summary(combo$Revenue)
## PPEP Issues
combo$PPEP <- ifelse(combo$Email == "tgaughan@honigman.com", 1400000, combo$PPEP)
combo$PPEP <- ifelse(combo$Email == "pcampbell@turnerpadget.com", median(combo$PPEP, na.rm = TRUE), combo$PPEP)
combo$PPEP <- ifelse(combo$Email == "dmiller@sutter-law.com", median(combo$PPEP, na.rm = TRUE), combo$PPEP)
combo$PPEP <- ifelse(combo$Email == "pross@clarkhill.com", 620000, combo$PPEP)   # as entered 620, I did not confirm
combo$PPEP <- ifelse(combo$Email == "rundell@hitefanning.com", 330000, combo$PPEP) # as entered 33000, I did not confirm
combo$PPEP <- ifelse(combo$Email == "jeff@lsclaw.com", 500000, combo$PPEP)  # as entered 50000, I did not confirm
combo$PPEP <- ifelse(combo$Email == "akoplos@shuffieldlowman.com", 750000, combo$PPEP)   # as entered 75000, I did not confirm
combo$PPEP <- ifelse(combo$Email == "sking@pbwt.com", 2025000, combo$PPEP) # as entered 20250000, did not confirm
# summary(combo$PPEP)
# which(combo$PPEP < 250000)  # 3 but I left them as is
# max(combo$PPEP, na.rm = TRUE)
# Billing Rate Issues
# summary(combo$BillingRate)
# which(combo$BillingRate == 1250)  # 3
# Practice Groups
# table(combo$PGs)
# Lawyer Staff Ratio
# I converted the following numbers to percentages (41 was lowest)
combo$JDRatio <- ifelse(combo$Email == "rcarroll@robinsongray.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "jdurham@verrill-law.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "kevin.busch@lawmoss.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "ganderson@andersonkill.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "dcovello@rccblaw.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "eamon@greenbaumlaw.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "rstaggers@bakerdonelson.com", combo$JDRatio/100, combo$JDRatio)
combo$JDRatio <- ifelse(combo$Email == "kcannon@bassberry.com", combo$JDRatio/1000, combo$JDRatio) #636
combo$JDRatio <- ifelse(combo$Email == "jbrefach@mccarter.com", 0.51, combo$JDRatio) # was 51
combo$JDRatio <- ifelse(combo$Email == "acampbell@bbllaw.com", 0.63, combo$JDRatio)
# summary(combo$JDRatio)
# Weekly Emails
# summary(combo$WklyEmails)
# ADD GENDER
library(gender)
library(genderdata)
# remotes::install_github("lmullen/genderdata")
Gender <- gender(names = combo$First, method = "genderize")
combo <- bind_cols(combo, Gender[2])  #on 7/2 blocked from too many requests. so save and read
# table(factor(combo$gender), useNA = "always")
# which(is.na(combo$gender)
combo$gender <- ifelse(combo$Email == "brefach@mccarter.com", "male", combo$gender)
# writexl::write_xlsx(combo, path = "C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/comboReportFour.xlsx")  # 228 on 9/28 after removing all duplicates and unqualified
writexl::write_xlsx(combo, path = "C:/Users/rees/Documents/R/Projects/CLIENTS/COO Comp 2023/comboReportFour.xlsx")
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::serve_site()
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::check_site()
blogdown:::create_index()
blogdown::check_site()
blogdown::config_Rprofile()
blogdown::config_Rprofile()
blogdown::clean_duplicates(preview = FALSE)
file.remove(c(
"content/post/2023-01-18-create-drop-down-selection-lists/DropDowns.html"
))
blogdown::build_site(build_rmd = "newfile")
blogdown::check_site()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::serve_site()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::serve_site()
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::check_hugo()
blogdown::check_site()
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
blogdown::serve_site()
blogdown::stop_server()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
serve_site()
blogdown:::new_post_addin()
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
knitr::opts_chunk$set(echo=F, warning=F, message=F, fig.align='center')
knitr::opts_knit$set(root.dir = "C:/Users/rees/Documents/R/Projects/CLIENTS/UKRlosses/")
library(tidyverse)
library(dplyr)
library(readxl)
library(kableExtra)
library(scales)
library(xtable)
library(ggthemes)
library(ggrepel)
library(RColorBrewer)
library(TSPred)
library(GGally)
library(ggcorrplot)
library(caret)
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
library(broom)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , -1])
# summary(RegModAllVars)
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Loss", "Coefficient", "StdError", "TStat", "p_value")
summaryBroom$Coefficient <- format(summaryBroom$Coefficient, digits = 2)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
summaryBroom <- summaryBroom[-c(1), ]
summaryBroom <- summaryBroom %>% dplyr::select(Loss, Coefficient, p_value) %>% arrange(p_value)
regrTable <- kable(subset(summaryBroom, p_value < 0.06), caption = "Linear Regression Model", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position")
regrTable
summaryBroom
kable(subset(summaryBroom, p_value < 0.06), caption = "Linear Regression Model", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position")
colnames(summaryBroom) <- c("Loss", "Coefficient", "StdError", "TStat", "p_value")
summaryBroom$Coefficient <- format(summaryBroom$Coefficient, digits = 2, scientific = FALSE)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , -1])
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Loss", "Coefficient", "StdError", "TStat", "p_value")
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , 1:11])
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Term", "Loss", "Coefficient", "StdError", "TStat", "p_value")
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
library(broom)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , 1:11])
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Term", "Loss", "Coefficient", "StdError", "p_value")
summaryBroom$Coefficient <- format(summaryBroom$Coefficient, digits = 2, scientific = FALSE)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
summaryBroom <- summaryBroom[-c(1), ]
summaryBroom <- summaryBroom %>% dplyr::select(Loss, Coefficient, p_value) %>% arrange(p_value)
kable(subset(summaryBroom, p_value < 0.06), caption = "Linear Regression Model", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position")
kable(subset(summaryBroom, p_value < 0.07), caption = "Linear Regression Model", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position")
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
library(broom)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , 1:11])
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Term", "Loss", "Coefficient", "StdError", "p_value")
summaryBroom$Loss <- round(summaryBroom$Loss, digits = 2)
summaryBroom$Coefficient <- format(summaryBroom$Coefficient, digits = 2, scientific = FALSE)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
summaryBroom <- summaryBroom[-c(1), ]
summaryBroom <- summaryBroom %>% dplyr::select(Loss, Coefficient, p_value) %>% arrange(p_value)
View(summaryBroom)
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
library(broom)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , 1:11])
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Term", "Loss", "Coefficient", "StdError", "p_value")
summaryBroom$Loss <- round(summaryBroom$Loss, digits = 1)
summaryBroom$Coefficient <- format(summaryBroom$Coefficient, digits = 2, scientific = FALSE)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
summaryBroom <- summaryBroom[-c(1), ]
View(summaryBroom)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , 1:11])
summary(RegModAllVars)
broom::tidy(RegModAllVars)
broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Equipment", "Coefficient", "StdError", "Stat", "p_value")
summaryBroom$Coefficient <- round(summaryBroom$Coefficient, digits = 2)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
summaryBroom <- summaryBroom[-c(1), ]
View(summaryBroom)
summaryBroom <- summaryBroom %>% dplyr::select(Equipment, Coefficient, p_value) %>% arrange(p_value)
kable(summaryBroom, caption = "Linear Regression Model", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position")
newFormula <- as.formula(substituteDirect(formula(RegModAllVars), as.list(coef(RegModAllVars))))
newFormula
as.formula(
paste0("y ~ ", round(coefficients(RegModAllVars)[1],2), "",
paste(sprintf(" %+.2f*%s ",
coefficients(RegModAllVars)[-1],
names(coefficients(RegModAllVars)[-1])),
collapse="")
)
)
as.formula(
paste0("y ~ ", round(coefficients(RegModAllVars)[1],1), "",
paste(sprintf(" %+.2f*%s ",
coefficients(RegModAllVars)[-1],
names(coefficients(RegModAllVars)[-1])),
collapse="")
)
as.formula(
paste0("y ~ ", round(coefficients(RegModAllVars)[1],1), "",
paste(sprintf(" %+.2f*%s ",
coefficients(RegModAllVars)[-1],
names(coefficients(RegModAllVars)[-1])),
collapse="")
)
)
ukrReg <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
library(broom)
RegModAllVars <- lm(Soldiers ~ ., data = ukrReg[  , 1:11])
# summary(RegModAllVars)
summaryBroom <- broom::tidy(RegModAllVars)
colnames(summaryBroom) <- c("Equipment", "Coefficient", "StdError", "Stat", "p_value")
summaryBroom$Coefficient <- round(summaryBroom$Coefficient, digits = 2)
summaryBroom$p_value <- round(summaryBroom$p_value, digits = 4)
summaryBroom <- summaryBroom[-c(1), ]
summaryBroom <- summaryBroom %>% dplyr::select(Equipment, Coefficient, p_value) %>% arrange(p_value)
View(summaryBroom)
kable(summaryBroom, caption = "Linear Regression Model", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position")
as.numeric(summaryBroom["Tanks", 2])
as.numeric(summaryBroom[Tanks, 2])
as.numeric(summaryBroom[5, 2])
as.numeric(summaryBroom[2, 2])
format(summary(RegModAllVars)$adj.r.squared, digits = 2)
format(summary(RegModAllVars)$fstatistic, digits = 1)[3]
blogdown:::new_post_addin()
stop_server()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
serve_site()
blogdown:::new_post_addin()
knitr::opts_chunk$set(echo=F, warning=F, message=F, fig.align='center')
knitr::opts_knit$set(root.dir = "C:/Users/rees/Documents/R/Projects/CLIENTS/UKRlosses/")
library(tidyverse)
library(dplyr)
library(readxl)
library(kableExtra)
library(scales)
library(xtable)
library(ggthemes)
library(ggrepel)
library(RColorBrewer)
library(TSPred)
library(GGally)
library(ggcorrplot)
library(caret)
ukrAll <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
outliers <- data.frame(bind_rows(ukrAll[ukrAll$Day == 42, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 5, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 247, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 284, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 147, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 142, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 283, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 265, c(1:6, 8:10, 12, 15)])) %>%
relocate(Tanks, APCs, AA, Arty, MLRS, Fuel, SpecEquip,  UAV, Soldiers, Date, Day)
kable(outliers, caption = "Days with Anomalous Losses", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position") %>%
row_spec(c(1, 4), bold = TRUE, color = "red")
ukrOut <- ukrAll[  , c(1:11, 15)] # drop Date, Day of Week, Week, but keep day
# car::outlierTest(lm(Soldiers ~ ., data = ukrOut[ , -12])) # drop Day; suggests to me that it sees 247 as the only suspect
# ukrOut[247, ] # 9 Tanks, 3 APC, 1 AA, 0 MLRS, 19 Arty  yet 1140 soldiers
# ukrOut[223, ] # 9 Tanks, 11 APC, 3 AA, 0 MLRS, 23 Arty yet 1060 Soldiers
# ukrOut[5, ] # 34 Tanks, 91 APC, 18 AA, 20 FUEL but only 820 Soldiers
# ukrOut[284, ] # 3 Tanks, 2  APC, 2 MLRS, 0 AA, 12 Arty but 810 Soldiers
# ukrOut[42, ] # 4 Tanks, 14 APC, 2 MLRS, 1 AA, 29 Arty but only 460 Soldiers
# ukrOut[142, ] # 0 Tanks, 14 APC, 4 MLRS, 1 AA, 29 Arty but only 480 Soldiers
# as.Date("2023-01-01") + 246 # identify day of the year from day count
knitr::opts_chunk$set(echo=F, warning=F, message=F, fig.align='center')
knitr::opts_knit$set(root.dir = "C:/Users/rees/Documents/R/Projects/CLIENTS/UKRlosses/")
library(tidyverse)
library(dplyr)
library(readxl)
library(kableExtra)
library(scales)
library(xtable)
library(ggthemes)
library(ggrepel)
library(RColorBrewer)
library(TSPred)
library(GGally)
library(ggcorrplot)
library(caret)
ukrAll <- read_xlsx(path = "C:/Users/rees/Documents//R/Projects/CLIENTS/UKRlosses/ukrAll.xlsx")
outliers <- data.frame(bind_rows(ukrAll[ukrAll$Day == 42, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 5, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 247, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 284, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 147, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 142, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 283, c(1:6, 8:10, 12, 15)], ukrAll[ukrAll$Day == 265, c(1:6, 8:10, 12, 15)])) %>%
relocate(Tanks, APCs, AA, Arty, MLRS, Fuel, SpecEquip,  UAV, Soldiers, Date, Day)
kable(outliers, caption = "Days with Anomalous Losses", row.names = FALSE) %>%
kable_styling(position = "center", full_width = FALSE, latex_options = "hold_position") %>%
row_spec(c(1, 4), bold = TRUE, color = "red")
ukrOut <- ukrAll[  , c(1:11, 15)] # drop Date, Day of Week, Week, but keep day
# car::outlierTest(lm(Soldiers ~ ., data = ukrOut[ , -12])) # drop Day; suggests to me that it sees 247 as the only suspect
# ukrOut[247, ] # 9 Tanks, 3 APC, 1 AA, 0 MLRS, 19 Arty  yet 1140 soldiers
# ukrOut[223, ] # 9 Tanks, 11 APC, 3 AA, 0 MLRS, 23 Arty yet 1060 Soldiers
# ukrOut[5, ] # 34 Tanks, 91 APC, 18 AA, 20 FUEL but only 820 Soldiers
# ukrOut[284, ] # 3 Tanks, 2  APC, 2 MLRS, 0 AA, 12 Arty but 810 Soldiers
# ukrOut[42, ] # 4 Tanks, 14 APC, 2 MLRS, 1 AA, 29 Arty but only 460 Soldiers
# ukrOut[142, ] # 0 Tanks, 14 APC, 4 MLRS, 1 AA, 29 Arty but only 480 Soldiers
# as.Date("2023-01-01") + 246 # identify day of the year from day count
# Calculate outlier values (e.g., values beyond 1.5 * IQR)
outliers <- ukrOut %>%
mutate(outlier = ifelse(APCs < quantile(APCs, 0.25) - 1.5 * IQR(APCs) |
APCs > quantile(APCs, 0.75) + 1.5 * IQR(APCs),
APCs, NA))
# Create a data frame for labels using the "Date" variable
# label_data <- outliers %>% select(Day, outlier) %>% filter(!is.na(outlier))
ggplot(outliers, aes(x = Soldiers, y = APCs)) +   # color = ifelse(DayOfWeek %in% c("Sat", "Sun"), "blue", "yellow")
geom_violin(trim = FALSE) +
geom_boxplot(width = 0.2, outlier.colour = "red") +
labs(x = "Soldier Casualties", y = "APCs Losses", title = "Violin Plot of Soldier Casualties by APC Losses; Outliers in Red") +
# theme(legend.position = "none") +
# guides(color = FALSE) +
# theme(axis.text.x = element_text(angle = 0)) +
scale_x_continuous(breaks = seq(0, 1500, 100)) +
scale_y_continuous(breaks = seq(0, 100, 5)) +
# stat_summary(fun.y=mean, geom="point", size=4, color="green") +
geom_jitter(shape = 16, position = position_jitter(0.1)) +
theme_classic() +
ggplot2::annotate("text", x = 640, y = max(outliers$APCs), label = "Day 5 at 91 >>")
# geom_text(data = label_data, aes(label = outlier),  nudge_x = 0.2, nudge_y = 0.2)
# quantile(ukrAll$APCs, prob=c(.25,.5,.75), type=1)  # third quartile
library(ggdist)
library(ghibli)
# remove 5 (91 APCs) and 142 (80 UAV) as they mess up the raincloud plot
outliersLong <- outliers[-c(5, 142), ] %>% pivot_longer(., cols = c("Tanks", "APCs", "Arty", "UAV"), names_to = "Equipment", values_to = "Losses")
ggplot(outliersLong, aes(x = Equipment, y = Losses, fill = Equipment)) +
scale_fill_ghibli_d("SpiritedMedium", direction = -1) +
geom_boxplot(width = 0.2, outlier.colour = "red") +
labs(x = NULL, y = NULL, title = "Losses per Day by Equipment", subtitle = "Excluding two outlier days (91 APCs and 80 UAVs)") +
theme_classic(base_size=16, base_family="serif") +
theme(text = element_text(size=14),
# axis.text.x = element_text(angle=0, hjust=.5, vjust = 0.5, color = "black"),
# axis.text.y = element_text(color = "black"),
plot.title = element_text(hjust = 0.5),   # center title of plot
plot.subtitle = element_text(hjust = 0.5),
legend.position="none")+
scale_y_continuous(breaks = seq(0, 65, by = 5), limits = c(0, 65), expand = c(0, 0)) +
# Line below adds dot plots from {ggdist} package
#  stat_dots(side = "left", justification = 1.04, binwidth = 1.2) +
# Line below adds half-violin from {ggdist} package
stat_halfeye(adjust = .2, width = .7, justification = -.2, .width = 0, point_colour = NA)
library(mvoutlier)
invisible(aq.plot(x = ukrNorm[ , c(1:5)])) # looks the same as the unnormalized
invisible(car::influencePlot(lm(Soldiers ~ ., data = ukrOut), id.n = 5))
# car::influencePlot(lm(prestige ~ income + education, data=Duncan), id.n =5)[-2]  # posted SO question on 11/14 at 10:17 AM
# which.max(stats::cooks.distance(model = lm(Soldiers ~ ., data = ukrOut)))  # day 5
car::influenceIndexPlot(lm(Soldiers ~ ., data = ukrOut), id.n = 5, vars = "Cook") # vars could be "Studentized", "Bonf" or "hat"
car::avPlots(lm(Soldiers ~ ., data = ukrOut[ , -c(7, 11, 12)]), id.n = 5, id.cex = 0.7,
main = "Added-Variable Plots of Equipment Losses and Residuals", marginal.scale = TRUE)
# when marginal.scale = F, x on APCs is -20 to 60; Tanks is -10 to 25
# when marginal.scale = T, x on APCs is -20 to 80; Tanks is -10 to 40; Arty is -20 to 33  (T means range minus mean)
stop_server()
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
knitr:: opts_chunk$set(echo=F, warning=F, message=F, fig.align='center')
library(tidyverse)
library(kableExtra)
library(readxl)
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)
library(knitr)
library(bookdown)
library(tidytext)
library(kableExtra)
library(blogdown)
save .Rmd, bookdown::render_book("index.Rmd", "bookdown::pdf_book")
save.Rmd, bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("SavSurvGuideLean.Rmd", "bookdown::pdf_book")
bookdown::render_book("C:/Users/rees/Documents/R/Projects/LAWYER Hornbooks/5Surveys/SurveyBook/SavSurvGuideLean.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "all")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
blogdown:::blogdown_site
bookdown::pdf_book
bookdown::pdf_book()
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
bookdown::render_book("index.Rmd", "bookdown::pdf_book")
knitr::opts_chunk$set(echo = FALSE, warning=FALSE, message = FALSE)
library(tidyverse)  # frequently used packages that follow a similar coding approach
library(blogdown)
library(knitr)
library(funModeling) # to compare vectors against each other, such as URLs of posts
library(ggthemes) # to include the theme_tufte them in plots
library(lubridate) # to deal with date data, such as the date a post is published
library(ggrepel) # to spread points or text so that they do not overlap on a plot
library(readxl) # to read in the underlying Excel data
library(tidytext) # text-mining functions that help analyse the content of posts
library(writexl)
library(kableExtra)
serve_site()
blogdown:::new_post_addin()
stop_server()
